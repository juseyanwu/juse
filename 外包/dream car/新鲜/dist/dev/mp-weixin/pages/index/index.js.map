{"version":3,"file":"index.js","sources":["../../../../../src/pages/index/index.vue","../../../../../uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<script setup lang=\"ts\">\nimport { getHomeBannerAPI, getHomeCategoryAPI, getHomeHotAPI } from '@/services/home'\nimport { onLoad } from '@dcloudio/uni-app'\nimport CustomNavBar from './component/CustomNavBar.vue'\nimport HotPanel from './component/HotPanel.vue'\nimport { ref } from 'vue'\nimport type { BannerItem, CategoryItem, HotItem } from '@/types/home'\nconst bannerList = ref<BannerItem[]>([])\nimport categoryPanel from './component/categoryPanel.vue'\nimport type { XtxGuessInstance } from '@/types/components'\nimport PageSkeleton from './component/PageSkeleton.vue'\nimport { useGuessList } from '@/composables/index'\nconst getHomeBannerData = async () => {\n  const res = await getHomeBannerAPI()\n  // console.log(res)\n  bannerList.value = res.result\n}\n\nconst categoryList = ref<CategoryItem[]>([])\nconst getHomeCategoryData = async () => {\n  const res = await getHomeCategoryAPI()\n  categoryList.value = res.result\n}\nconst HotList = ref<HotItem[]>([])\n//获取热门\nconst getHomeHotData = async () => {\n  const res = await getHomeHotAPI()\n  HotList.value = res.result\n}\nonLoad(async () => {\n  isLoading.value = true\n  await Promise.all([getHomeBannerData(), getHomeCategoryData(), getHomeHotData()])\n\n  isLoading.value = false\n})\n\nconst { guessRef, onScrolltolower } = useGuessList()\n\nconst isTrigerred = ref(false)\nconst onRefresherrefresh = async () => {\n  isTrigerred.value = true\n  // await getHomeBannerData()\n  // await getHomeCategoryData()\n  // await getHomeHotData()\n  guessRef.value?.resetData()\n  await Promise.all([\n    getHomeBannerData(),\n    getHomeCategoryData(),\n    getHomeHotData(),\n    guessRef.value?.getMore(),\n  ])\n  isTrigerred.value = false\n}\nconst isLoading = ref(false)\n</script>\n\n<template>\n  <CustomNavBar />\n  <scroll-view\n    refresher-enabled\n    @scrolltolower=\"onScrolltolower\"\n    @refresherrefresh=\"onRefresherrefresh\"\n    :refresher-triggered=\"isTrigerred\"\n    class=\"scroll-view\"\n    scroll-y\n  >\n    <PageSkeleton v-if=\"isLoading\" />\n    <template v-else>\n      <!-- 轮播图 -->\n      <XtxSwiper :list=\"bannerList\" />\n      <!-- 分类 -->\n      <categoryPanel :list=\"categoryList\" />\n      <!-- 推荐专区 -->\n      <HotPanel :list=\"HotList\" />\n      <XtxGuess ref=\"guessRef\" />\n    </template>\n  </scroll-view>\n</template>\n\n<style lang=\"scss\">\npage {\n  background-color: #f7f7f7;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.home {\n  flex: 1;\n}\n</style>\n","import MiniProgramPage from 'C:/Users/wsczj/Desktop/xinxiangzhi-uniapp-main/src/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getHomeBannerAPI","getHomeCategoryAPI","getHomeHotAPI","onLoad","useGuessList"],"mappings":";;;;;;;;;;;;;;;;;AAGA,MAAA,eAAyB,MAAA;AACzB,MAAA,WAAqB,MAAA;AAIrB,MAAA,gBAA0B,MAAA;AAE1B,MAAA,eAAyB,MAAA;;;;AAHnB,UAAA,aAAaA,kBAAkB,CAAA,CAAE;AAKvC,UAAM,oBAAoB,YAAY;AAC9B,YAAA,MAAM,MAAMC,cAAAA;AAElB,iBAAW,QAAQ,IAAI;AAAA,IAAA;AAGnB,UAAA,eAAeD,kBAAoB,CAAA,CAAE;AAC3C,UAAM,sBAAsB,YAAY;AAChC,YAAA,MAAM,MAAME,cAAAA;AAClB,mBAAa,QAAQ,IAAI;AAAA,IAAA;AAErB,UAAA,UAAUF,kBAAe,CAAA,CAAE;AAEjC,UAAM,iBAAiB,YAAY;AAC3B,YAAA,MAAM,MAAMG,cAAAA;AAClB,cAAQ,QAAQ,IAAI;AAAA,IAAA;AAEtBC,kBAAAA,OAAO,YAAY;AACjB,gBAAU,QAAQ;AACZ,YAAA,QAAQ,IAAI,CAAC,kBAAA,GAAqB,uBAAuB,eAAgB,CAAA,CAAC;AAEhF,gBAAU,QAAQ;AAAA,IAAA,CACnB;AAED,UAAM,EAAE,UAAU,gBAAgB,IAAIC,kBAAa,aAAA;AAE7C,UAAA,cAAcL,kBAAI,KAAK;AAC7B,UAAM,qBAAqB,YAAY;;AACrC,kBAAY,QAAQ;AAIpB,qBAAS,UAAT,mBAAgB;AAChB,YAAM,QAAQ,IAAI;AAAA,QAChB,kBAAkB;AAAA,QAClB,oBAAoB;AAAA,QACpB,eAAe;AAAA,SACf,cAAS,UAAT,mBAAgB;AAAA,MAAQ,CACzB;AACD,kBAAY,QAAQ;AAAA,IAAA;AAEhB,UAAA,YAAYA,kBAAI,KAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpD3B,GAAG,WAAW,eAAe;"}